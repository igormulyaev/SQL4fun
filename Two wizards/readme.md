# Two wizards

У некоторого султана было два мудреца: Али-ибн-Вали и Вали-ибн-Али. Желая убедиться в их мудрости, султан призвал мудрецов к себе и сказал: «Я задумал два числа. Оба они целые, каждое больше единицы, но меньше ста. Я перемножил эти числа и результат сообщу Али и при этом Вали я скажу сумму этих чисел. Если вы и вправду так мудры, как о вас говорят, то сможете узнать исходные числа».

Мудрецы задумались. Первым нарушил молчание Али.
— Я не знаю этих чисел, — сказал он, опуская голову.
— Я это знал, — подал голос Вали.
— Тогда я знаю эти числа, — обрадовался Али.
— Тогда и я знаю! — воскликнул Вали.
И мудрецы сообщили пораженному царю задуманные им числа.

Назовите эти числа.



Зависимость от nMax по памяти и количеству итераций квадратичная, на каждый потенциальный вариант произведения двух чисел используется два бита. Попытался придумать более компактный вариант для хранения и поиска уникальных произведений. Составил программу, подсчитывающую отношение количества уникальных произведений к их потенциальному количеству. Оказалось, что по мере роста nMax отношение мееедленно приближается сверху к 20%. То есть, чтобы выиграть по памяти у простейшего варианта, надо придумать, как сохранить значение каждого уникального произведения в менее чем 10 битах. Я такое придумать затрудняюсь.